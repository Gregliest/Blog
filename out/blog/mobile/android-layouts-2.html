<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><title>Layouts Part II: Add/Remove/Collapse</title><meta name="robots" content="follow, index"/><meta name="description" content="A comparison of the ease of adding, removing, and collapsing views in an Android Linear Layout vs. an iOS Interface Builder view."/><meta property="og:url" content="https://gregliest.github.io/blog/mobile/android-layouts-2"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Blog"/><meta property="og:description" content="A comparison of the ease of adding, removing, and collapsing views in an Android Linear Layout vs. an iOS Interface Builder view."/><meta property="og:title" content="Layouts Part II: Add/Remove/Collapse"/><meta property="og:image" content="https://gregliest.github.io/static/images/twitter-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content=""/><meta name="twitter:title" content="Layouts Part II: Add/Remove/Collapse"/><meta name="twitter:description" content="A comparison of the ease of adding, removing, and collapsing views in an Android Linear Layout vs. an iOS Interface Builder view."/><meta name="twitter:image" content="https://gregliest.github.io/static/images/twitter-card.png"/><link rel="canonical" href="https://gregliest.github.io/blog/mobile/android-layouts-2"/><meta property="article:published_time" content="2014-11-16T01:04:45.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://gregliest.github.io/blog/mobile/android-layouts-2"
  },
  "headline": "Layouts Part II: Add/Remove/Collapse",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://gregliest.github.io/static/images/twitter-card.png"
    }
  ],
  "datePublished": "2014-11-16T01:04:45.000Z",
  "dateModified": "2014-11-16T01:04:45.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Gregory Lee"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Gregory Lee",
    "logo": {
      "@type": "ImageObject",
      "url": "https://gregliest.github.io/static/images/logo.png"
    }
  },
  "description": "A comparison of the ease of adding, removing, and collapsing views in an Android Linear Layout vs. an iOS Interface Builder view."
}</script><meta name="next-head-count" content="19"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/4998f4c6a354514b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4998f4c6a354514b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-cf9c328f706f1fd5.js" defer=""></script><script src="/_next/static/chunks/framework-109a728694328ca8.js" defer=""></script><script src="/_next/static/chunks/main-05393c48e9316d33.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f9d2e67b91e759ce.js" defer=""></script><script src="/_next/static/chunks/675-14c3b3baa8506076.js" defer=""></script><script src="/_next/static/chunks/266-f485f5b68acdf582.js" defer=""></script><script src="/_next/static/chunks/486-47259eb0bf813a5f.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-d42440c49924bf1f.js" defer=""></script><script src="/_next/static/Uk5C59Zgl51sx5Hq37kK4/_buildManifest.js" defer=""></script><script src="/_next/static/Uk5C59Zgl51sx5Hq37kK4/_ssgManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&false)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}else{c.add('light')}if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'light'}catch(e){}}()</script><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="344.564 330.278 111.737 91.218" width="53.87" height="43.61" role="img"><defs><linearGradient id="logo_svg__b" gradientUnits="userSpaceOnUse" x1="420.97" y1="331.28" x2="420.97" y2="418.5"><stop style="stop-color:#06b6d4;stop-opacity:1" offset="0%"></stop><stop style="stop-color:#67e8f9;stop-opacity:1" offset="100%"></stop></linearGradient><linearGradient id="logo_svg__d" gradientUnits="userSpaceOnUse" x1="377.89" y1="331.28" x2="377.89" y2="418.5"><stop style="stop-color:#06b6d4;stop-opacity:1" offset="0%"></stop><stop style="stop-color:#67e8f9;stop-opacity:1" offset="100%"></stop></linearGradient><path d="M453.3 331.28v28.57l-64.66 58.65v-30.08l64.66-57.14Z" id="logo_svg__a"></path><path d="M410.23 331.28v28.57l-64.67 58.65v-30.08l64.67-57.14Z" id="logo_svg__c"></path></defs><use xlink:href="#logo_svg__a" fill="url(#logo_svg__b)"></use><use xlink:href="#logo_svg__c" fill="url(#logo_svg__d)"></use></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block"></div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/code">Code</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/whitewater">Whitewater</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/photography">Photography</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/ideas">Ideas</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">Projects</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-24 right-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><button type="button" aria-label="toggle modal" class="fixed h-full w-full cursor-auto focus:outline-none"></button><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/code">Code</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/whitewater">Whitewater</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/photography">Photography</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/ideas">Ideas</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2014-11-16T01:04:45.000Z">Saturday, November 15, 2014</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Layouts Part II: Add/Remove/Collapse</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="h-10 w-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" src="/static/images/avatar.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="h-10 w-10 rounded-full" loading="lazy"/></noscript></span><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Gregory Lee</dd><dt class="sr-only">Twitter</dt><dd><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/Twitter" class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400">@Twitter</a></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><p>The real power of Android&#x27;s Linear Layout and readable xml over iOS&#x27;s constraint system becomes apparent when as you try to change the view. Let’s try adding a caption text field between the picture and the button in the view from the previous post. In Android in a Linear Layout, simply add the new text field in the position you want it to appear. The Linear Layout handles the rest.</p><div class="relative"><pre><code class="language-css code-highlight"><span class="code-line">&lt;LinearLayout <span class="token property">xmlns</span><span class="token punctuation">:</span>android=<span class="token string">&quot;http://schemas.android.com/apk/res/android&quot;</span>
</span><span class="code-line">                             <span class="token property">android</span><span class="token punctuation">:</span>orientation=<span class="token string">&quot;vertical&quot;</span>
</span><span class="code-line">                             <span class="token property">android</span><span class="token punctuation">:</span>layout_width=<span class="token string">&quot;fill_parent&quot;</span>
</span><span class="code-line">                             <span class="token property">android</span><span class="token punctuation">:</span>layout_height=<span class="token string">&quot;fill_parent&quot;</span>&gt;
</span><span class="code-line">
</span><span class="code-line">&lt;TextView
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>layout_width=<span class="token string">&quot;fill_parent&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>layout_height=<span class="token string">&quot;wrap_content&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>gravity=<span class="token string">&quot;center_horizontal&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>text=<span class="token string">&quot;Canyon Creek, CA&quot;</span>/&gt;
</span><span class="code-line">
</span><span class="code-line">&lt;ImageView
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>layout_width=<span class="token string">&quot;fill_parent&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>layout_height=<span class="token string">&quot;300dp&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>gravity=<span class="token string">&quot;center_horizontal&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>scaleType=<span class="token string">&quot;fitCenter&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>src=<span class="token string">&quot;@drawable/CanyonCreek&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>id=<span class="token string">&quot;@+id/imageView&quot;</span>/&gt;
</span><span class="code-line">
</span><span class="code-line">&lt;TextView
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>layout_width=<span class="token string">&quot;fill_parent&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>layout_height=<span class="token string">&quot;wrap_content&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>gravity=<span class="token string">&quot;center_horizontal&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>text=<span class="token string">&quot;A really awesome waterfall!&quot;</span>/&gt;
</span><span class="code-line">
</span><span class="code-line">&lt;Button
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>layout_width=<span class="token string">&quot;wrap_content&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>layout_height=<span class="token string">&quot;wrap_content&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>text=<span class="token string">&quot;New Button&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>layout_gravity=<span class="token string">&quot;center_horizontal&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>id=<span class="token string">&quot;@+id/button&quot;</span>/&gt;
</span><span class="code-line">
</span><span class="code-line">&lt;/LinearLayout&gt;
</span></code></pre></div><p>On iOS, adding a view is much harder. First, break the constraint between the image and the button. Next, drag a new text field onto the screen. Then, add new constraints, and make them equal to one another. For some reason, IB does not update the constraints when you drag a view around, or update the frame when you change the constraints. So, to complete the process, tell IB manually to update the frames of all the views. Here is an intermediate stage as I futz with IB to make all the constraints line up. Life is getting harder in the world of Apple...</p><div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%271037%27%20height=%27700%27/%3e"/></span><img alt="iOS Add View" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="iOS Add View" src="/static/images/linear-layout/ios-add-caption.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><p>To remove a view in Android, simply remove the view from the Linear Layout. The view&#x27;s attributes and layout logic are completely encapsulated within the xml tag, or abstracted away by the Linear Layout, so the developer doesn&#x27;t have to do anything else. This design is simple, clean, and beautiful. On the other hand, in iOS, you’ll have to go through the whole process of deleting the view and rebuilding the surrounding constraints. Painful.</p><p>In general, the use of constraints in iOS complicates changes to views. Even in a moderately complex view, dozens of constraints are required to define the layout. With so much going on, it becomes difficult to figure out what layout parameters depend on what, and how view placements are defined. I’ve had situations where all I’ve wanted to do is replace a single view element, and have had to tear down and rebuild dozens of constraints for that seemingly simple change. Furthermore, the constraints system doesn&#x27;t scale well, as modifying or debugging a view becomes more and more difficult as more view elements are added. Redesigns in iOS are almost always painful. I once spent 8 hours updating the four screens in my personal app from iOS 6 to iOS 7, AFTER adhering to the best practices outlined for iOS 6. Furthermore, since the xml from IB is auto generated and isn&#x27;t really readable, two developers cannot work on the same part of a view, as the ensuing merge conflicts are usually totally unworkable. It&#x27;s also worth noting that some attributes must be set in code, notably hex colors. So, the system forces the developer to split some layout logic between IB and code. Please, for the sake of your later self and all the developers coming after you, at least be consistent with what you put in IB and what you put in code.</p><h1 id="visibility"><a href="#visibility" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Visibility</h1><p>Now let’s say you want a view to appear conditionally. Android has provided a convenient and simple attribute to make this possible. Set visibility:invisible if you want the view to be invisible but not collapsed (if other view placements are measured off this view) or set Visibility:gone if you want the view to be completely gone (collapsed). The initial visibility of a view can be set in the xml, and further changes can be done in code. Here&#x27;s an example of hiding the image.</p><div class="relative"><pre><code class="language-css code-highlight"><span class="code-line">&lt;ImageView
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>layout_width=<span class="token string">&quot;fill_parent&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>layout_height=<span class="token string">&quot;300dp&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>gravity=<span class="token string">&quot;center_horizontal&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>scaleType=<span class="token string">&quot;fitCenter&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>src=<span class="token string">&quot;@drawable/CanyonCreek&quot;</span>
</span><span class="code-line">        <span class="token property">android</span><span class="token punctuation">:</span>visibility=<span class="token string">&quot;gone&quot;</span>/&gt;
</span></code></pre></div><div><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27469%27%20height=%27831%27/%3e"/></span><img alt="Visible" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="Visible" src="/static/images/linear-layout/android-visible.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><p>Notice that the Linear Layout automatically fixed the spacing around the &quot;gone&quot; view as well, so the remaining elements are evenly spaced. Awesomesauce.</p><p>In iOS, setting the view to be hidden is the equivalent of Android&#x27;s “invisible”: constraints are still measured off of that hidden view. But, there is no equivalent to gone, which makes constructing collapsible views a huge pain. As usual in iOS, there are a number of ways to replicate the behavior of “gone,” and all of them are awkward in my opinion. Here&#x27;s the one I currently favor.</p><div class="relative"><pre><code class="code-highlight language-objective"><span class="code-line">@interface ViewController ()
</span><span class="code-line">@property (weak, nonatomic) IBOutlet NSLayoutConstraint *captionImageSpacingConstraint;
</span><span class="code-line">@property (weak, nonatomic) IBOutlet NSLayoutConstraint *captionHeight;
</span><span class="code-line">@property (weak, nonatomic) IBOutlet UITextView *captionTextView;
</span><span class="code-line">@end
</span><span class="code-line">
</span><span class="code-line">@implementation ViewController
</span><span class="code-line">
</span><span class="code-line">- (void)hideCaption {
</span><span class="code-line">    self.captionImageSpacingConstraint.constant = 0;
</span><span class="code-line">    self.captionHeight.constant = 0;
</span><span class="code-line">    self.captionTextView.hidden = YES;
</span><span class="code-line">}
</span><span class="code-line">@end
</span></code></pre></div><p>As you can see, I set the height constraint of the caption to be 0. I then had to set the spacing between the caption and the image to be zero to eliminate the extra space between the image and the button. Finally, I had to set the text view to be hidden because views with a height constraint of 0 will still be drawn behind the currently visible view element, which can incur a performance penalty. Also, if the currently visible view element is transparent, the collapsed view will show through. The above code only works if I want to be able to hide the view once. If I want to be able to toggle the view to be visible again, I need to save the spacing and height constraints somewhere, which adds two more variables to the above code. Thus every collapsible view needs at least two wired constraints, two variables, and a method, which quickly leads to code bloat, especially in a view with multiple collapsible view elements.</p><p>There are a couple of other ways to hide a view. I could have set another constraint that encompassed both the spacing and the text view height constraint. I would then set the priority of the spacing and height constraints to be lower than the larger constraint, and the height can be toggled using that single constraint. I also could have set the constraint between the image and the next item (the button in this case). Again this saves one constraint in the controller, but adds a constraint in IB. I find that the added constraint and the differing priorities create confusing views in IB, especially as views get more complex and have more constraints on screen. The added constraint also makes it harder to add or remove views, since the elements are now tied together with one more constraint. It&#x27;s a tradeoff between complexity in IB and more code bloat. Again, all of this can be yours for free in Android.</p><p><a target="_blank" rel="noopener noreferrer" href="../android-ios-layouts-part-iii-the-beauty-of-layout-weight-and-conclusion">Continue to Part III: The Beauty of Layout Weight and Conclusion</a></p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="nofollow" href="https://mobile.twitter.com/search?q=https%3A%2F%2Fgregliest.github.io%2Fblog%2Fmobile%2Fandroid-layouts-2">Discuss on Twitter</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/gregliest/Blog/blob/master/data/blog/mobile/android-layouts-2">View on GitHub</a></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/code">code</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/android">android</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/ios">iOS</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/mobile">mobile</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/mobile/android-layouts-1">Layouts Part I: Android &gt; iOS</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/mobile/android-layouts-3">Layouts Part III: The Beauty of Layout Weight and Conclusion</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:blog@gregliest.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" role="img" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/gregliest"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Gregory Lee</div><div> • </div><div>© 2022</div><div> • </div><a href="/">Blog</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Layouts Part II: Add/Remove/Collapse","date":"2014-11-16T01:04:45.000Z","summary":"A comparison of the ease of adding, removing, and collapsing views in an Android Linear Layout vs. an iOS Interface Builder view.","tags":["code","android","iOS","mobile"],"thumbnail":"/linear-layout/android-visible.png","series":{"name":"Android Layouts","number":2,"type":"Series","_raw":{}},"body":{"raw":"\nThe real power of Android's Linear Layout and readable xml over iOS's constraint system becomes apparent when as you try to change the view. Let’s try adding a caption text field between the picture and the button in the view from the previous post. In Android in a Linear Layout, simply add the new text field in the position you want it to appear. The Linear Layout handles the rest.\n\n```css\n\u003cLinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n                             android:orientation=\"vertical\"\n                             android:layout_width=\"fill_parent\"\n                             android:layout_height=\"fill_parent\"\u003e\n\n\u003cTextView\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"wrap_content\"\n        android:gravity=\"center_horizontal\"\n        android:text=\"Canyon Creek, CA\"/\u003e\n\n\u003cImageView\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"300dp\"\n        android:gravity=\"center_horizontal\"\n        android:scaleType=\"fitCenter\"\n        android:src=\"@drawable/CanyonCreek\"\n        android:id=\"@+id/imageView\"/\u003e\n\n\u003cTextView\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"wrap_content\"\n        android:gravity=\"center_horizontal\"\n        android:text=\"A really awesome waterfall!\"/\u003e\n\n\u003cButton\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"New Button\"\n        android:layout_gravity=\"center_horizontal\"\n        android:id=\"@+id/button\"/\u003e\n\n\u003c/LinearLayout\u003e\n```\n\nOn iOS, adding a view is much harder. First, break the constraint between the image and the button. Next, drag a new text field onto the screen. Then, add new constraints, and make them equal to one another. For some reason, IB does not update the constraints when you drag a view around, or update the frame when you change the constraints. So, to complete the process, tell IB manually to update the frames of all the views. Here is an intermediate stage as I futz with IB to make all the constraints line up. Life is getting harder in the world of Apple...\n\n![iOS Add View](/static/images/linear-layout/ios-add-caption.png)\n\nTo remove a view in Android, simply remove the view from the Linear Layout. The view's attributes and layout logic are completely encapsulated within the xml tag, or abstracted away by the Linear Layout, so the developer doesn't have to do anything else. This design is simple, clean, and beautiful. On the other hand, in iOS, you’ll have to go through the whole process of deleting the view and rebuilding the surrounding constraints. Painful.\n\nIn general, the use of constraints in iOS complicates changes to views. Even in a moderately complex view, dozens of constraints are required to define the layout. With so much going on, it becomes difficult to figure out what layout parameters depend on what, and how view placements are defined. I’ve had situations where all I’ve wanted to do is replace a single view element, and have had to tear down and rebuild dozens of constraints for that seemingly simple change. Furthermore, the constraints system doesn't scale well, as modifying or debugging a view becomes more and more difficult as more view elements are added. Redesigns in iOS are almost always painful. I once spent 8 hours updating the four screens in my personal app from iOS 6 to iOS 7, AFTER adhering to the best practices outlined for iOS 6. Furthermore, since the xml from IB is auto generated and isn't really readable, two developers cannot work on the same part of a view, as the ensuing merge conflicts are usually totally unworkable. It's also worth noting that some attributes must be set in code, notably hex colors. So, the system forces the developer to split some layout logic between IB and code. Please, for the sake of your later self and all the developers coming after you, at least be consistent with what you put in IB and what you put in code.\n\n# Visibility\n\nNow let’s say you want a view to appear conditionally. Android has provided a convenient and simple attribute to make this possible. Set visibility:invisible if you want the view to be invisible but not collapsed (if other view placements are measured off this view) or set Visibility:gone if you want the view to be completely gone (collapsed). The initial visibility of a view can be set in the xml, and further changes can be done in code. Here's an example of hiding the image.\n\n```css\n\u003cImageView\n        android:layout_width=\"fill_parent\"\n        android:layout_height=\"300dp\"\n        android:gravity=\"center_horizontal\"\n        android:scaleType=\"fitCenter\"\n        android:src=\"@drawable/CanyonCreek\"\n        android:visibility=\"gone\"/\u003e\n```\n\n![Visible](/static/images/linear-layout/android-visible.png)\n![Invisible](/static/images/linear-layout/android-invisible.png)\n![Gone](/static/images/linear-layout/android-gone.png)\n_Image view is visible, invisible, and gone_\n\nNotice that the Linear Layout automatically fixed the spacing around the \"gone\" view as well, so the remaining elements are evenly spaced. Awesomesauce.\n\nIn iOS, setting the view to be hidden is the equivalent of Android's “invisible”: constraints are still measured off of that hidden view. But, there is no equivalent to gone, which makes constructing collapsible views a huge pain. As usual in iOS, there are a number of ways to replicate the behavior of “gone,” and all of them are awkward in my opinion. Here's the one I currently favor.\n\n```objective c\n@interface ViewController ()\n@property (weak, nonatomic) IBOutlet NSLayoutConstraint *captionImageSpacingConstraint;\n@property (weak, nonatomic) IBOutlet NSLayoutConstraint *captionHeight;\n@property (weak, nonatomic) IBOutlet UITextView *captionTextView;\n@end\n\n@implementation ViewController\n\n- (void)hideCaption {\n    self.captionImageSpacingConstraint.constant = 0;\n    self.captionHeight.constant = 0;\n    self.captionTextView.hidden = YES;\n}\n@end\n```\n\nAs you can see, I set the height constraint of the caption to be 0. I then had to set the spacing between the caption and the image to be zero to eliminate the extra space between the image and the button. Finally, I had to set the text view to be hidden because views with a height constraint of 0 will still be drawn behind the currently visible view element, which can incur a performance penalty. Also, if the currently visible view element is transparent, the collapsed view will show through. The above code only works if I want to be able to hide the view once. If I want to be able to toggle the view to be visible again, I need to save the spacing and height constraints somewhere, which adds two more variables to the above code. Thus every collapsible view needs at least two wired constraints, two variables, and a method, which quickly leads to code bloat, especially in a view with multiple collapsible view elements.\n\nThere are a couple of other ways to hide a view. I could have set another constraint that encompassed both the spacing and the text view height constraint. I would then set the priority of the spacing and height constraints to be lower than the larger constraint, and the height can be toggled using that single constraint. I also could have set the constraint between the image and the next item (the button in this case). Again this saves one constraint in the controller, but adds a constraint in IB. I find that the added constraint and the differing priorities create confusing views in IB, especially as views get more complex and have more constraints on screen. The added constraint also makes it harder to add or remove views, since the elements are now tied together with one more constraint. It's a tradeoff between complexity in IB and more code bloat. Again, all of this can be yours for free in Android.\n\n[Continue to Part III: The Beauty of Layout Weight and Conclusion](../android-ios-layouts-part-iii-the-beauty-of-layout-weight-and-conclusion)\n","code":"var Component=(()=\u003e{var h=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var N=(a,e)=\u003e()=\u003e(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=\u003e{for(var t in e)s(a,t,{get:e[t],enumerable:!0})},l=(a,e,t,o)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let i of m(e))!g.call(a,i)\u0026\u0026i!==t\u0026\u0026s(a,i,{get:()=\u003ee[i],enumerable:!(o=p(e,i))||o.enumerable});return a};var w=(a,e,t)=\u003e(t=a!=null?h(u(a)):{},l(e||!a||!a.__esModule?s(t,\"default\",{value:a,enumerable:!0}):t,a)),k=a=\u003el(s({},\"__esModule\",{value:!0}),a);var c=N((L,r)=\u003e{r.exports=_jsx_runtime});var x={};y(x,{default:()=\u003eb,frontmatter:()=\u003ef});var n=w(c()),f={title:\"Layouts Part II: Add/Remove/Collapse\",date:new Date(1416099885e3),summary:\"A comparison of the ease of adding, removing, and collapsing views in an Android Linear Layout vs. an iOS Interface Builder view.\",tags:[\"code\",\"android\",\"iOS\",\"mobile\"],thumbnail:\"/linear-layout/android-visible.png\",series:{name:\"Android Layouts\",number:2},type:\"Blog\"};function d(a){let e=Object.assign({p:\"p\",pre:\"pre\",code:\"code\",span:\"span\",div:\"div\",h1:\"h1\",a:\"a\"},a.components),{Image:t}=e;return t||I(\"Image\",!0,\"53:1-53:66\"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"The real power of Android's Linear Layout and readable xml over iOS's constraint system becomes apparent when as you try to change the view. Let\\u2019s try adding a caption text field between the picture and the button in the view from the previous post. In Android in a Linear Layout, simply add the new text field in the position you want it to appear. The Linear Layout handles the rest.\"}),(0,n.jsx)(e.pre,{className:\"language-css\",children:(0,n.jsxs)(e.code,{className:\"language-css code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\u003cLinearLayout \",(0,n.jsx)(e.span,{className:\"token property\",children:\"xmlns\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"android=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"http://schemas.android.com/apk/res/android\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                             \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"orientation=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"vertical\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                             \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_width=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"fill_parent\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                             \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_height=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"fill_parent\"'}),`\u003e\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\u003cTextView\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_width=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"fill_parent\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_height=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"wrap_content\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"gravity=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"center_horizontal\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"text=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Canyon Creek, CA\"'}),`/\u003e\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\u003cImageView\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_width=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"fill_parent\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_height=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"300dp\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"gravity=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"center_horizontal\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"scaleType=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"fitCenter\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"src=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"@drawable/CanyonCreek\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"id=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"@+id/imageView\"'}),`/\u003e\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\u003cTextView\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_width=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"fill_parent\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_height=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"wrap_content\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"gravity=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"center_horizontal\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"text=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"A really awesome waterfall!\"'}),`/\u003e\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\u003cButton\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_width=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"wrap_content\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_height=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"wrap_content\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"text=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"New Button\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_gravity=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"center_horizontal\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"id=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"@+id/button\"'}),`/\u003e\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\u003c/LinearLayout\u003e\n`})]})}),(0,n.jsx)(e.p,{children:\"On iOS, adding a view is much harder. First, break the constraint between the image and the button. Next, drag a new text field onto the screen. Then, add new constraints, and make them equal to one another. For some reason, IB does not update the constraints when you drag a view around, or update the frame when you change the constraints. So, to complete the process, tell IB manually to update the frames of all the views. Here is an intermediate stage as I futz with IB to make all the constraints line up. Life is getting harder in the world of Apple...\"}),(0,n.jsx)(e.div,{children:(0,n.jsx)(t,{alt:\"iOS Add View\",src:\"/static/images/linear-layout/ios-add-caption.png\",width:\"1037\",height:\"700\"})}),(0,n.jsx)(e.p,{children:\"To remove a view in Android, simply remove the view from the Linear Layout. The view's attributes and layout logic are completely encapsulated within the xml tag, or abstracted away by the Linear Layout, so the developer doesn't have to do anything else. This design is simple, clean, and beautiful. On the other hand, in iOS, you\\u2019ll have to go through the whole process of deleting the view and rebuilding the surrounding constraints. Painful.\"}),(0,n.jsx)(e.p,{children:\"In general, the use of constraints in iOS complicates changes to views. Even in a moderately complex view, dozens of constraints are required to define the layout. With so much going on, it becomes difficult to figure out what layout parameters depend on what, and how view placements are defined. I\\u2019ve had situations where all I\\u2019ve wanted to do is replace a single view element, and have had to tear down and rebuild dozens of constraints for that seemingly simple change. Furthermore, the constraints system doesn't scale well, as modifying or debugging a view becomes more and more difficult as more view elements are added. Redesigns in iOS are almost always painful. I once spent 8 hours updating the four screens in my personal app from iOS 6 to iOS 7, AFTER adhering to the best practices outlined for iOS 6. Furthermore, since the xml from IB is auto generated and isn't really readable, two developers cannot work on the same part of a view, as the ensuing merge conflicts are usually totally unworkable. It's also worth noting that some attributes must be set in code, notably hex colors. So, the system forces the developer to split some layout logic between IB and code. Please, for the sake of your later self and all the developers coming after you, at least be consistent with what you put in IB and what you put in code.\"}),(0,n.jsxs)(e.h1,{id:\"visibility\",children:[(0,n.jsx)(e.a,{href:\"#visibility\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Visibility\"]}),(0,n.jsx)(e.p,{children:\"Now let\\u2019s say you want a view to appear conditionally. Android has provided a convenient and simple attribute to make this possible. Set visibility:invisible if you want the view to be invisible but not collapsed (if other view placements are measured off this view) or set Visibility:gone if you want the view to be completely gone (collapsed). The initial visibility of a view can be set in the xml, and further changes can be done in code. Here's an example of hiding the image.\"}),(0,n.jsx)(e.pre,{className:\"language-css\",children:(0,n.jsxs)(e.code,{className:\"language-css code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`\u003cImageView\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_width=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"fill_parent\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"layout_height=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"300dp\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"gravity=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"center_horizontal\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"scaleType=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"fitCenter\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"src=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"@drawable/CanyonCreek\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"android\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"visibility=\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"gone\"'}),`/\u003e\n`]})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(t,{alt:\"Visible\",src:\"/static/images/linear-layout/android-visible.png\",width:\"469\",height:\"831\"})}),(0,n.jsx)(e.p,{children:'Notice that the Linear Layout automatically fixed the spacing around the \"gone\" view as well, so the remaining elements are evenly spaced. Awesomesauce.'}),(0,n.jsx)(e.p,{children:\"In iOS, setting the view to be hidden is the equivalent of Android's \\u201Cinvisible\\u201D: constraints are still measured off of that hidden view. But, there is no equivalent to gone, which makes constructing collapsible views a huge pain. As usual in iOS, there are a number of ways to replicate the behavior of \\u201Cgone,\\u201D and all of them are awkward in my opinion. Here's the one I currently favor.\"}),(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight language-objective\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`@interface ViewController ()\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`@property (weak, nonatomic) IBOutlet NSLayoutConstraint *captionImageSpacingConstraint;\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`@property (weak, nonatomic) IBOutlet NSLayoutConstraint *captionHeight;\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`@property (weak, nonatomic) IBOutlet UITextView *captionTextView;\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`@end\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`@implementation ViewController\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`- (void)hideCaption {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    self.captionImageSpacingConstraint.constant = 0;\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    self.captionHeight.constant = 0;\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    self.captionTextView.hidden = YES;\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`}\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`@end\n`})]})}),(0,n.jsx)(e.p,{children:\"As you can see, I set the height constraint of the caption to be 0. I then had to set the spacing between the caption and the image to be zero to eliminate the extra space between the image and the button. Finally, I had to set the text view to be hidden because views with a height constraint of 0 will still be drawn behind the currently visible view element, which can incur a performance penalty. Also, if the currently visible view element is transparent, the collapsed view will show through. The above code only works if I want to be able to hide the view once. If I want to be able to toggle the view to be visible again, I need to save the spacing and height constraints somewhere, which adds two more variables to the above code. Thus every collapsible view needs at least two wired constraints, two variables, and a method, which quickly leads to code bloat, especially in a view with multiple collapsible view elements.\"}),(0,n.jsx)(e.p,{children:\"There are a couple of other ways to hide a view. I could have set another constraint that encompassed both the spacing and the text view height constraint. I would then set the priority of the spacing and height constraints to be lower than the larger constraint, and the height can be toggled using that single constraint. I also could have set the constraint between the image and the next item (the button in this case). Again this saves one constraint in the controller, but adds a constraint in IB. I find that the added constraint and the differing priorities create confusing views in IB, especially as views get more complex and have more constraints on screen. The added constraint also makes it harder to add or remove views, since the elements are now tied together with one more constraint. It's a tradeoff between complexity in IB and more code bloat. Again, all of this can be yours for free in Android.\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"../android-ios-layouts-part-iii-the-beauty-of-layout-weight-and-conclusion\",children:\"Continue to Part III: The Beauty of Layout Weight and Conclusion\"})})]})}function v(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(d,a)})):d(a)}var b=v;function I(a,e,t){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(t?\"\\nIt\\u2019s referenced in your code at `\"+t+\"` in `/home/greg/Code/Blog/_mdx_bundler_entry_point-9d58f300-2d32-451d-a632-20cf9abae4d7.mdx`\":\"\"))}return k(x);})();\n;return Component;"},"_id":"blog/mobile/android-layouts-2.mdx","_raw":{"sourceFilePath":"blog/mobile/android-layouts-2.mdx","sourceFileName":"android-layouts-2.mdx","sourceFileDir":"blog/mobile","contentType":"mdx","flattenedPath":"blog/mobile/android-layouts-2"},"type":"Blog","readingTime":{"text":"6 min read","minutes":5.525,"time":331500,"words":1105},"slug":"mobile/android-layouts-2","toc":[{"value":"Visibility","url":"#visibility","depth":1}]},"authorDetails":[{"name":"Gregory Lee","avatar":"/static/images/avatar.png","occupation":"Professor of Atmospheric Science","company":"Stanford University","email":"address@yoursite.com","twitter":"https://twitter.com/Twitter","linkedin":"https://www.linkedin.com","github":"https://github.com","type":"Authors","readingTime":{"text":"1 min read","minutes":0.015,"time":900,"words":3},"slug":"default","toc":[]}],"prev":{"title":"Layouts Part I: Android \u003e iOS","date":"2014-11-15T01:01:45.000Z","summary":"A comparison of basic layouts in iOS and Android.","tags":["code","android","iOS","mobile"],"thumbnail":"/static/images/linear-layout/android-initial.png","series":{"name":"Android Layouts","number":1,"type":"Series","_raw":{}},"type":"Blog","readingTime":{"text":"4 min read","minutes":3.835,"time":230100,"words":767},"slug":"mobile/android-layouts-1","toc":[]},"next":{"title":"Layouts Part III: The Beauty of Layout Weight and Conclusion","date":"2014-11-17T01:05:23.000Z","summary":"A discussion of Android's layout weight and the fantastic abstraction it represents.  There is no equivalent on iOS.","tags":["code","mobile","android"],"thumbnail":"/linear-layout/android-buttons-weight.png","series":{"name":"Android Layouts","number":3,"type":"Series","_raw":{}},"type":"Blog","readingTime":{"text":"4 min read","minutes":3.61,"time":216600,"words":722},"slug":"mobile/android-layouts-3","toc":[]}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["mobile","android-layouts-2"]},"buildId":"Uk5C59Zgl51sx5Hq37kK4","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>